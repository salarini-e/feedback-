<!DOCTYPE html>
<html>

<head>
   <!-- basic -->
   <meta charset="utf-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <!-- mobile metas -->
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <meta name="viewport" content="initial-scale=1, maximum-scale=1">
   <!-- site metas -->
   <title>PMNF - Feedback+</title>
   <meta name="keywords" content="">
   <meta name="description" content="">
   <meta name="author" content="">
   <!-- bootstrap css -->
   <link rel="stylesheet" type="text/css" href="/static/css/bootstrap.min.css">
   <!-- style css -->
   <link rel="stylesheet" type="text/css" href="/static/css/style.css">
   <!-- Responsive-->
   <link rel="stylesheet" href="/static/css/responsive.css">
   <!-- fevicon -->
   <link rel="icon" href="https://intranet.novafriburgo.rj.gov.br/static/brasao.ico" type="image/ico" />
   <!-- font css -->
   <link href="https://fonts.googleapis.com/css?family=Roboto:400,500,700&display=swap" rel="stylesheet">
   <!-- Scrollbar Custom CSS -->
   <link rel="stylesheet" href="/static/css/jquery.mCustomScrollbar.min.css">
   <!-- Tweaks for older IEs-->
   <!-- <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css"> -->

   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
      integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
      crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>

   <div class="services_section layout_padding">
      <div class="container">
         <div class="row">
            <div class="col-lg-4  d-flex">
               <img class="logoPMNF" style="max-width: 300px;" src="https://intranet.novafriburgo.rj.gov.br/static/images/logo.png" alt="">
            </div>
            <div class="col-lg-8 col-md-12 col-sm-12">
               <div class="w-100 d-flex">                  
                  <h1 class="services_taital" style="margin-top: 5px;">AVALIE NOSSO ATENDIMENTO</h1>
               </div>
               
               <p class="services_text">Nos ajude a melhorar nossos serviços. Avalie a qualidade do atendimento que você
                  recebeu e compartilhe sua experiência conosco!</p>
            </div>
         </div>
         
         <div class="services_section_2">
            <div class="row">
               <div class="col">
                  <h5 class="tasty_text {% if local.descricao %}mb-3{% endif %}" style="text-align: center;">
                     {% if local.banner %}
                        <img src="{{ local.banner.url }}" alt="Banner do Local" style="max-width: 100%; height: auto;"> <!-- Display banner -->
                     {% else %}
                        <strong>{{ local.nome }}</strong> <!-- Display name if no banner -->
                     {% endif %}
                  </h5>
                  <p style="text-align: justify;">
                     {% if local.descricao %}
                        {{local.descricao}}
                     {% endif %}
                  </p>
                  <hr class="mt-3">
                  <div class="row">
                     <div class="col" style="text-align: center;">
                        {% if messages %}                        
                           <div class="alert alert-danger" role="alert">
                              {{ messages }}
                           </div>
                        {% endif %}
                        
                        <div class="form-group d-flex flex-column" data-category="ambiente">
                           <label for="exampleFormControlSelect1">Como você avalia as condições do ambiente enquanto aguarda o atendimento?<br>(ex: limpeza, conforto das cadeiras, temperatura, organização).</label>
                           <div class="emoji-rating mx-auto">
                              <span class="emoji" data-value="1" data-category="ambiente" style="color: red;"><i class="fa-solid fa-face-angry"></i></span>
                              <span class="emoji" data-value="2" data-category="ambiente" style="color: orange;"><i class="fa-solid fa-face-frown"></i></span>
                              <span class="emoji" data-value="3" data-category="ambiente" style="color: rgb(235, 219, 0);"><i class="fa-solid fa-face-meh"></i></span>
                              <span class="emoji" data-value="4" data-category="ambiente" style="color: rgb(61, 212, 61);"><i class="fa-solid fa-face-smile-beam"></i></span>
                              <span class="emoji" data-value="5" data-category="ambiente" style="color: green;"><i class="fa-solid fa-face-grin-wink"></i></span>
                           </div>
                        </div>
                     </div>
                  </div>
                  <hr class="mt-3">
                  <div class="row">
                     <div class="col" style="text-align: center;">
                        <div class="form-group d-flex flex-column" data-category="tempo">
                           <label for="exampleFormControlSelect1">Como está o tempo de espera e a rapidez do atendimento?</label>
                           <div class="emoji-rating mx-auto">
                              <span class="emoji" data-value="1" data-category="tempo" style="color: red;"><i class="fa-solid fa-face-angry"></i></span>
                              <span class="emoji" data-value="2" data-category="tempo" style="color: orange;"><i class="fa-solid fa-face-frown"></i></span>
                              <span class="emoji" data-value="3" data-category="tempo" style="color: rgb(235, 219, 0);"><i class="fa-solid fa-face-meh"></i></span>
                              <span class="emoji" data-value="4" data-category="tempo" style="color: rgb(61, 212, 61);"><i class="fa-solid fa-face-smile-beam"></i></span>
                              <span class="emoji" data-value="5" data-category="tempo" style="color: green;"><i class="fa-solid fa-face-grin-wink"></i></span>
                           </div>
                        </div>
                     </div>
                  </div>
                  <hr class="mt-3">
                  <div class="row">
                     <div class="col" style="text-align: center;">
                        <div class="form-group d-flex flex-column" data-category="satisfacao">
                           <label for="exampleFormControlSelect1">Qual é seu nível de satisfação com a solução do problema que o motivou a vir até {{local.nome}}?</label>
                           <div class="emoji-rating mx-auto">
                              <span class="emoji" data-value="1" data-category="satisfacao" style="color: red;"><i class="fa-solid fa-face-angry"></i></span>
                              <span class="emoji" data-value="2" data-category="satisfacao" style="color: orange;"><i class="fa-solid fa-face-frown"></i></span>
                              <span class="emoji" data-value="3" data-category="satisfacao" style="color: rgb(235, 219, 0);"><i class="fa-solid fa-face-meh"></i></span>
                              <span class="emoji" data-value="4" data-category="satisfacao" style="color: rgb(61, 212, 61);"><i class="fa-solid fa-face-smile-beam"></i></span>
                              <span class="emoji" data-value="5" data-category="satisfacao" style="color: green;"><i class="fa-solid fa-face-grin-wink"></i></span>
                           </div>
                        </div>
                     </div>
                  </div>
                  <hr class="mt-3">
                  <div class="row">
                     <div class="col" style="text-align: center;">
                        <div class="form-group d-flex flex-column" data-category="atendimento">
                           <label for="exampleFormControlSelect1">Como você avalia o atendimento do profissional que lhe atendeu?</label>
                           <div class="emoji-rating mx-auto">
                              <span class="emoji" data-value="1" data-category="atendimento" style="color: red;"><i class="fa-solid fa-face-angry"></i></span>
                              <span class="emoji" data-value="2" data-category="atendimento" style="color: orange;"><i class="fa-solid fa-face-frown"></i></span>
                              <span class="emoji" data-value="3" data-category="atendimento" style="color: rgb(235, 219, 0);"><i class="fa-solid fa-face-meh"></i></span>
                              <span class="emoji" data-value="4" data-category="atendimento" style="color: rgb(61, 212, 61);"><i class="fa-solid fa-face-smile-beam"></i></span>
                              <span class="emoji" data-value="5" data-category="atendimento" style="color: green;"><i class="fa-solid fa-face-grin-wink"></i></span>
                           </div>
                        </div>
                     </div>
                  </div>
                  <hr class="mt-3">
                  <div class="row">
                     <div class="col" style="text-align: center;">
                        <div class="form-group d-flex flex-column" data-category="sugestao">
                           <label for="exampleFormControlSelect1">Você gostaria de dar alguma sugestão para que a PMNF fosse mais eficiente no atendimento na {{local.nome}}?</label>
                           <textarea id="sugestao"></textarea>
                        </div>
                     </div>
                  </div>
                  <hr class="mt-3">
                  <div class="row">
                     <div class="col" style="text-align: center;">
                        <div class="form-group d-flex flex-column">
                           <label for="exampleFormControlSelect1">Você gostaria de deixar seu nome ou teleone para que o Secretário ou Líder da {{local.nome}} pudesse entrar em contato para entender melhor suas avaliações e sugestões?</label>
                           <div class="radio-group mx-auto mt-3">
                              <label class="radio">
                                  <input type="radio" name="resposta" value="sim">
                                  <span class="radio-label" data-value="sim">Sim</span>
                              </label>
                              <label class="radio">
                                  <input type="radio" name="resposta" value="nao">
                                  <span class="radio-label" data-value="nao">Não</span>
                              </label>
                          </div>                                                    
                        </div>
                     </div>
                  </div>
                  <div id="contato" class="row hidden">
                     <div class="col d-flex flex-column" style="text-align: center;">
                        <div class="form-group d-flex flex-column mx-auto" style="max-width: 350px;">
                           <label for="nome" class="mr-auto">Nome</label>
                           <input type="text" class="form-control" id="nome">
                        </div>
                        <div class="form-group d-flex flex-column mx-auto" style="max-width: 350px;">
                           <label for="telefone" class="mr-auto">Telefone</label>
                           <input type="text" class="form-control" id="telefone">
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
         <div class="seemore_bt mb-5"><button class="btn btn-success py-2 px-4">Enviar avaliação<i class="fa-solid fa-circle-check ml-2"></i></button></div>
      </div>
   </div>
   
   <div class="contact_section layout_padding mt-5">
      <div class="container">
         <div class="row">
         
            <div class="col-md-8">
               <div class="location_text">
                  <ul>
                     <li>
                        <a href="#">
                           <span class="padding_left_10 active"><i class="fa fa-map-marker"
                                 aria-hidden="true"></i></span>Av. Alberto Braune, 225 - Centro, Nova Friburgo - RJ, 28613-001</a>
                     </li><br>
                     <li class="mt-4">
                        <a href="#">
                           <span class="padding_left_10"><i class="fa fa-phone" aria-hidden="true"></i></span>(22) 2525-9100
                        </a>
                     </li>

                  </ul>
               </div>
             
            </div>
         </div>
      </div>
   </div>
   <div class="copyright_section">
      <div class="container">
         <p class="copyright_text">2025 © Subsecretaria de Tecnologia da Informação - <a href="https://pmnf.rj.gov.br/">PMNF</a></p>
      </div>
   </div>
   
   <!-- Javascript files-->
   <script src="/static/js/jquery.min.js"></script>
   <script src="/static/js/popper.min.js"></script>
   <script src="/static/js/bootstrap.bundle.min.js"></script>
   <script src="/static/js/jquery-3.0.0.min.js"></script>
   <script src="/static/js/plugin.js"></script>
   <!-- sidebar -->
   <script src="/static/js/jquery.mCustomScrollbar.concat.min.js"></script>
   <script src="/static/js/custom.js"></script>
   <!-- javascript -->

   <script>
      document.addEventListener("DOMContentLoaded", function () {
         const emojis = document.querySelectorAll(".emoji-rating .emoji");
         const radioButtons = document.querySelectorAll(".radio-group input");
         const contatoDiv = document.getElementById("contato");
         const enviarBtn = document.querySelector(".seemore_bt button");
         const sugestaoInput = document.getElementById("sugestao");
         const nomeInput = document.getElementById("nome");
         const telefoneInput = document.getElementById("telefone");
         const respostaInput = document.getElementsByName("resposta");

         let respostas = {
            local: '{{local.hash}}',            
            ambiente: null,
            tempo: null,
            satisfacao: null,
            atendimento: null,
            sugestao: null,
            resposta: null,
            contato: { nome: null, telefone: null }
         };

         function verificarRespostas() {
            const todasRespondidas = Object.values(respostas).slice(0, 4).every(resposta => resposta !== null);
            const contatoPreenchido = respostas.contato && respostas.contato.nome && respostas.contato.telefone;
            enviarBtn.disabled = !todasRespondidas || (respostas.contato && !contatoPreenchido);
         }

         emojis.forEach(emoji => {
            emoji.addEventListener("click", function () {
               const categoria = this.getAttribute("data-category");
               respostas[categoria] = this.getAttribute("data-value");

               const parentDiv = this.closest(".form-group");
               parentDiv.querySelectorAll(".emoji").forEach(e => e.style.opacity = "0.3");
               this.style.opacity = "1";

               verificarRespostas();
            });
         });

         radioButtons.forEach(radio => {
            radio.addEventListener("change", function () {
               respostas.resposta = this.value;
               respostas.contato = this.value === "sim" ? { nome: null, telefone: null } : null;

               const labels = document.querySelectorAll(".radio-label");
               labels.forEach(label => {
                  label.style.color = label.getAttribute("data-value") === this.value
                     ? (this.value === "sim" ? "green" : "red")
                     : "black";
               });

               contatoDiv.style.display = this.value === "sim" ? "block" : "none";
               verificarRespostas();
            });
         });

         sugestaoInput.addEventListener("input", function () {
            respostas.sugestao = this.value;
         });

         nomeInput.addEventListener("input", function () {
            if (respostas.contato) respostas.contato.nome = this.value.trim();
            verificarRespostas();
         });

         telefoneInput.addEventListener("input", function () {
            if (respostas.contato) respostas.contato.telefone = this.value.trim();
            verificarRespostas();
         });

         enviarBtn.addEventListener("click", function () {
            console.log("Respostas:", respostas);
            // montar formulario e submiter ele
            const form = document.createElement("form");
            form.method = "POST";
            form.action = "/feedback/{{local.hash}}/";

            const csrfInput = document.createElement("input");
            csrfInput.type = "hidden";
            csrfInput.name = "csrfmiddlewaretoken";
            csrfInput.value = '{{ csrf_token }}';
            form.appendChild(csrfInput);

            Object.keys(respostas).forEach(key => {
               if (key === "contato" && respostas[key]) {
                  Object.keys(respostas[key]).forEach(subKey => {
                     const input = document.createElement("input");
                     input.type = "hidden";
                     input.name = `contato_${subKey}`;
                     input.value = respostas[key][subKey];
                     form.appendChild(input);
                  });
               } else {
                  const input = document.createElement("input");
                  input.type = "hidden";
                  input.name = key;
                  input.value = respostas[key];
                  form.appendChild(input);
               }
            });

            document.body.appendChild(form);
            form.submit();

         });

         enviarBtn.disabled = true;

         {% if local.nome == 'SUBSECRETARIA DE TI' %}          
            document.querySelectorAll(".form-group[data-category]").forEach((formGroup, index) => {
               const labels = [
                  "Como você avalia o atendimento da TI?",
                  "Como está o tempo de espera e a rapidez do atendimento da TI?",
                  "Qual é seu nível de satisfação com a solução do problema que o motivou a abrir o chamado na TI?",
                  "Como você avalia o atendimento do técnico que o atendeu?",
                  "Você gostaria de dar alguma sugestão para que a TI fosse mais eficiente no atendimento?",
                  "Você gostaria de deixar seu nome ou teleone para que o Secretário ou Líder da Subsecretaria de TI pudesse entrar em contato para entender melhor suas avaliações e sugestões?"
            ];

               if (index < labels.length) {
                  formGroup.querySelector("label").textContent = labels[index];
               }
            });
         {% endif %}
      });
   </script>

   <style>
      label{
         font-weight: bold;
         font-size: large  ;
      }
      .emoji-rating {
         display: flex;
         gap: 15px;
         font-size: 3rem;
         cursor: pointer;
      }
      /* #selected-rating i{
         transform: scale(2);
         margin-left: 10px;
      } */
      .emoji {         
         margin-left: 10px;
         margin-right: 10px;         
         
         transition: transform 0.2s ease-in-out;
      }
      .emoji:hover {
         transform: scale(1.5);
      }
      textarea {
         width: 100%;
         min-height: 120px;
         padding: 12px 16px;
         border: 1px solid #cfcfcf;
         border-radius: 12px;
         font-size: 16px;
         font-family: 'Roboto', sans-serif;
         color: #333;
         background-color: #fff;
         outline: none;
         transition: all 0.3s ease-in-out;
         box-shadow: 2px 2px 10px rgba(126, 126, 126, 0.1);
         resize: vertical;
      }

      textarea:focus {
         border-color: #00ff2a;
         background-color: #ffffff;
         box-shadow: 4px 4px 15px rgba(0, 123, 255, 0.2);
      }
      .radio-group {
         display: flex;
         gap: 15px;
      }

      .radio {
         display: flex;
         align-items: center;
         cursor: pointer;
         font-size: 16px;
         font-family: 'Roboto', sans-serif;
         position: relative;
      }

      .radio input {
         display: none;
      }

      .radio-label {
         display: flex;
         align-items: center;
         justify-content: center;
         padding: 10px 20px;
         border: 2px solid #ddd;
         border-radius: 25px;
         background: #f9f9f9;
         color: #333;
         transition: all 0.3s ease-in-out;
         font-weight: bold;
         box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1);
      }

      /* Verde para "Sim" */
      .radio input[value="sim"]:checked + .radio-label {
         /* background: #28a745; */
         color: white;
         border-color: #28a745;
         box-shadow: 4px 4px 15px rgba(40, 167, 69, 0.3);
      }

      /* Vermelho para "Não" */
      .radio input[value="nao"]:checked + .radio-label {
         /* background: #dc3545; */
         color: white;
         border-color: #dc3545;
         box-shadow: 4px 4px 15px rgba(220, 53, 69, 0.3);
      }
      .hidden {
         display: none;
      }
      .services_taital{
         min-width: 100%;         
      }
      .services_taital::after{
         opacity: 0;
      }
      @media (max-width: 971px) {
         .services_taital {
            font-size: 1.5rem;
            text-align: center;
         }

         .logoPMNF {
            max-width: 200px;
            margin: 0 auto;
            margin-bottom: 20px;
         }

         .emoji-rating {
            font-size: 2rem;
            gap: 10px;
         }

         .radio-label {
            padding: 8px 16px;
            font-size: 14px;
         }

         textarea {
            font-size: 14px;
            padding: 10px 14px;
         }

         .seemore_bt button {
            font-size: 14px;
            padding: 10px 20px;
         }

         .location_text ul li a {
            font-size: 14px;
         }
      }
      /* .logoPMNF{
         
      } */
   </style>
</body>

</html>